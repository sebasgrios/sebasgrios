---
import { Image } from 'astro:assets';

import Avatar from '@/images/avatar.png';
import ThemeToggle from '@/components/Theme-Toggle.astro';
---

<header class='backdrop-blur-lg flex items-center justify-between max-w-3xl mx-auto px-4 py-2 sticky top-0 z-10'>
  <div id='avatar' class='duration-200 flex flex-row gap-2 items-center justify-left opacity-0 transition -translate-y-full'>
    <Image alt='Avatar de perfil de Sebastián' class='bg-clip-padding bg-gray-200 dark:bg-gray-700/75 border-4 border-white dark:border-gray-900 shadow-lg rounded-full size-12' src={Avatar} />
    <span class='font-semibold text-gray-800 dark:text-white text-lg'>Sebastián</span>
  </div>
  <ThemeToggle />
</header>

<script is:inline>
  window.onscroll = () => {
    const image = document.querySelector('#image');
    const avatar = document.querySelector('#avatar');

    const imageHeight = image.getBoundingClientRect().y + image.getBoundingClientRect().height;

    avatar.classList[imageHeight <= 0 ? 'remove' : 'add']('opacity-0');
    avatar.classList[imageHeight <= 0 ? 'remove' : 'add']('-translate-y-full');
  }
</script>